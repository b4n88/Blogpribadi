<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Albani">
<meta name="dcterms.date" content="2025-01-05">

<title>STATISTICIAN &amp; MARKET RESEARCH - METRIK ANALISA DATA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../ratakanan.css">
<link rel="stylesheet" href="../Bloog/blogstyle.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">STATISTICIAN &amp; MARKET RESEARCH</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/al-bani-532b06294/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://x.com/b4n_88"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#metrik-dan-inovasi" id="toc-metrik-dan-inovasi" class="nav-link active" data-scroll-target="#metrik-dan-inovasi">Metrik dan Inovasi</a></li>
  <li><a href="#kumpulan-metrik-diberbagai-industri" id="toc-kumpulan-metrik-diberbagai-industri" class="nav-link" data-scroll-target="#kumpulan-metrik-diberbagai-industri">Kumpulan Metrik diberbagai industri</a>
  <ul class="collapse">
  <li><a href="#metrik-retail-e-comerce" id="toc-metrik-retail-e-comerce" class="nav-link" data-scroll-target="#metrik-retail-e-comerce">Metrik Retail &amp; E-Comerce</a></li>
  <li><a href="#sektor-kesehatan" id="toc-sektor-kesehatan" class="nav-link" data-scroll-target="#sektor-kesehatan">Sektor Kesehatan</a></li>
  <li><a href="#teknologi-aplikasi-digital" id="toc-teknologi-aplikasi-digital" class="nav-link" data-scroll-target="#teknologi-aplikasi-digital">Teknologi &amp; Aplikasi Digital</a></li>
  <li><a href="#keuangan" id="toc-keuangan" class="nav-link" data-scroll-target="#keuangan">Keuangan</a></li>
  <li><a href="#manufaktur" id="toc-manufaktur" class="nav-link" data-scroll-target="#manufaktur">Manufaktur</a></li>
  <li><a href="#media-periklanan" id="toc-media-periklanan" class="nav-link" data-scroll-target="#media-periklanan">Media &amp; Periklanan</a></li>
  <li><a href="#saas-software-as-a-service" id="toc-saas-software-as-a-service" class="nav-link" data-scroll-target="#saas-software-as-a-service">SaaS (Software as a Service)</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">METRIK ANALISA DATA</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Data Analyst</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Albani </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 5, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><em>Metrik dan Inovasi sebagai data analyst</em></p>
<hr>
<p>Sebagai data analyst sepertinya ini adalah hal yang paling crusial dan harus diketahui. Ketika saya membaca buku yang baru dibuat oleh mentor saya Pak <a href="https://github.com/aephidayatuloh">Aep</a>, saya tidak sengaja membaca ini dan sepertinya harus saya pahami dan tuliskan. Saya ijin mengutip tulisan yang ada dalam buku itu. Oh iya jika anda ingin membaca bukunya lebih jelas bisa klik <a href="https://github.com/aephidayatuloh/data-analyst">di sini</a>.</p>
<section id="metrik-dan-inovasi" class="level1">
<h1>Metrik dan Inovasi</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="04 inv.webp" class="img-fluid figure-img"></p>
<figcaption>Sumber : google</figcaption>
</figure>
</div>
<p>Untuk mengerti apa itu metrik silakan membaca tulisan dari Uda <code>Ivan Lanin</code> tentang <a href="https://ivanlanin.medium.com/metrik-dan-inovasi-fbed46e1215e">Metrik dan Inovasi</a>. Jadi Metrik adalah sesuatu yang dijadikan tolak ukuran keberhasilan kerjaan. Dalam data analyst kita perlu paham apa saja metrik metrik yang dibutuhkan dalam melakukan anlisa. Contohnya adalah menganalisa perusahaan dalam mengukur performa bisnis melalui data yang dihasilkan. Untuk mencapai tujuan ini, data analyst menggunakan metrik bisnis yang relevan dengan industri dan kebutuhan perusahaan. Metrik bisnis adalah alat penting yang memahami apakah suatu perusahaan sedang berjalan di arah yang benar atau melakukan perbaikan. Setiap industri memiliki spesifikasi, namun konsepnya tetap sama ; Mengukur dan mengevaluasi kinerja untuk mengambil keputusan yang lebih baik</p>
<p>Inovasi adalah sesuatu yang dapat dikembangkan untuk meningkatkan kinerja. Lebih jelasnya ini adalah eksekusi yang dilakukan jika metrik sudah diketahui.</p>
<p><strong>Contoh</strong> : Perusahaan Ritel memliki metrik <code>CLV</code> (Customer Lifetime Value) dan <code>CAC</code> (Customer Accuisition Cost). CLV menghitung nilai total yang bisa dihasilakn dari pelanggan selama hidup. Sebaliknya, CAC menghitung biaya yang dikeluarkan untuk mendapatkan pelanggan baru. Dengan menggabungkan metrik ini kita bisa memberikan strategi marketing yang paling evektif. Strategi marketing ini disebut dengan Inovasi.</p>
</section>
<section id="kumpulan-metrik-diberbagai-industri" class="level1">
<h1>Kumpulan Metrik diberbagai industri</h1>
<p>Ini sebagai catatan yang bagian besar saja, bisa jadi client kita memiliki atau meminta metrik sesuai keinginan mereka.</p>
<section id="metrik-retail-e-comerce" class="level2">
<h2 class="anchored" data-anchor-id="metrik-retail-e-comerce">Metrik Retail &amp; E-Comerce</h2>
<ol type="1">
<li><strong><em>Customer Lifetime Value</em></strong> (CLV) - Nilai total yang dihasilkan pelanggan selama masa hidupnya.</li>
<li><strong><em>Customer Acquisition Cost</em></strong> (CAC) - Biaya yang dikeluarkan untuk memperoleh 1 pelanggan baru.</li>
<li><strong><em>Conversion Rate</em></strong> - Persentase pengunjung yang berubah menjadi pelanggan.</li>
<li><strong><em>Average Order Value</em></strong> (AOV) - Rata-rata nilai transaksi perpesanan.</li>
<li><strong><em>Cart Abandonment Rate</em></strong> - Persentase pelanggan yang meninggalkan kerangjang belanjaan sebelum menyelesaikan pembelian.</li>
<li><strong><em>Repeat Phurcase Rate</em></strong> - Peresentase pelanggan yang melakukan transaksi berulang.</li>
<li><strong><em>Gross Margin</em></strong> - Selisih antara biaya pendapatan dan biaya produksi.</li>
</ol>
</section>
<section id="sektor-kesehatan" class="level2">
<h2 class="anchored" data-anchor-id="sektor-kesehatan">Sektor Kesehatan</h2>
<ol type="1">
<li><strong><em>Patient Saisfaction Score</em></strong> - Tingkat kepuasan pasien dengan pelayanan yang diterima.</li>
<li><strong><em>Average Treatment Cost</em></strong> - Rata-rata biaya perawatan atau pengobatan.</li>
<li><strong><em>Hospital Readmission Rate</em></strong> - Persentase Pasien yang kembali dirawat dalam waktu tertentu setelah keluar dari rumah sakit.</li>
<li><strong><em>Patient Retention Rate</em></strong> - Persentase pasien yang masih menggunakan layanan setelah periode tertentu.</li>
<li><strong><em>Operational Efficiency</em></strong> - Ukuran efisiensi operasional dalam hal biaya dan waktu.</li>
</ol>
</section>
<section id="teknologi-aplikasi-digital" class="level2">
<h2 class="anchored" data-anchor-id="teknologi-aplikasi-digital">Teknologi &amp; Aplikasi Digital</h2>
<ol type="1">
<li><strong><em>Monthly Active Users</em></strong> (MAU) – Jumlah pengguna yang aktif menggunakan aplikasi/platform setiap bulan.<br>
</li>
<li><strong><em>Daily Active Users</em></strong> (DAU) – Jumlah pengguna yang aktif setiap hari.<br>
</li>
<li><strong><em>Churn Rate</em></strong> – Persentase pengguna atau pelanggan yang berhenti menggunakan layanan dalam periode waktu tertentu.<br>
</li>
<li><strong><em>Retention Rate</em></strong> – Persentase pengguna yang tetap menggunakan layanan setelah periode tertentu.<br>
</li>
<li><strong><em>Average Revenue Per User</em></strong> (ARPU) – Pendapatan rata-rata yang dihasilkan dari setiap pengguna dalam periode tertentu.</li>
</ol>
</section>
<section id="keuangan" class="level2">
<h2 class="anchored" data-anchor-id="keuangan">Keuangan</h2>
<ol type="1">
<li><strong><em>Return on Investment (ROI)</em></strong> – Ukuran pengembalian investasi relatif terhadap biaya yang dikeluarkan.<br>
</li>
<li><strong><em>Net Profit Margin</em></strong> – Persentase laba bersih terhadap total pendapatan.<br>
</li>
<li><strong><em>Operating Cash Flow</em></strong> – Jumlah uang tunai yang dihasilkan oleh operasi perusahaan.<br>
</li>
<li><strong><em>Debt-to-Equity Ratio</em></strong> – Rasio antara total utang dan ekuitas pemegang saham.<br>
</li>
<li><strong><em>Current Ratio</em></strong> – Rasio likuiditas yang mengukur kemampuan perusahaan untuk membayar kewajiban jangka pendek.</li>
</ol>
</section>
<section id="manufaktur" class="level2">
<h2 class="anchored" data-anchor-id="manufaktur">Manufaktur</h2>
<ol type="1">
<li><strong><em>Overall Equipment Effectiveness</em></strong> (OEE) – Ukuran efektivitas peralatan produksi, menggabungkan ketersediaan, kinerja, dan kualitas.<br>
</li>
<li><strong><em>Production Downtime</em></strong> – Waktu yang hilang akibat mesin tidak berfungsi atau gangguan produksi lainnya.<br>
</li>
<li><strong><em>Cost per Unit</em></strong> – Biaya untuk memproduksi satu unit produk.<br>
</li>
<li><strong><em>Inventory Turnover</em></strong> – Frekuensi rata-rata persediaan diperbarui dalam satu periode waktu.<br>
</li>
<li><strong><em>Defect Rate</em></strong> – Persentase produk cacat dalam produksi.</li>
</ol>
</section>
<section id="media-periklanan" class="level2">
<h2 class="anchored" data-anchor-id="media-periklanan">Media &amp; Periklanan</h2>
<ol type="1">
<li><strong><em>Cost per Click</em></strong> (CPC) – Biaya yang dibayar untuk setiap klik iklan.<br>
</li>
<li><strong><em>Cost per Acquisition</em></strong> (CPA) – Biaya yang dibayar untuk setiap tindakan atau konversi yang diinginkan.<br>
</li>
<li><strong><em>Click-Through Rate</em></strong> (CTR) – Persentase orang yang mengeklik iklan setelah melihatnya.<br>
</li>
<li><strong><em>Impressions</em></strong> – Jumlah total tampilan iklan.<br>
</li>
<li><strong><em>Engagement Rate</em></strong> – Persentase interaksi dengan konten atau iklan, seperti like, share, dan komentar.</li>
</ol>
</section>
<section id="saas-software-as-a-service" class="level2">
<h2 class="anchored" data-anchor-id="saas-software-as-a-service">SaaS (Software as a Service)</h2>
<ol type="1">
<li><strong><em>Annual Recurring Revenue</em></strong> (ARR) – Pendapatan tahunan yang dapat diprediksi dari pelanggan berlangganan.<br>
</li>
<li><strong><em>Customer Retention Rate</em></strong> – Persentase pelanggan yang tetap berlangganan setelah periode tertentu.<br>
</li>
<li><strong><em>Customer Churn Rate</em></strong> – Persentase pelanggan yang berhenti berlangganan dalam periode tertentu.<br>
</li>
<li><strong><em>Lifetime Value to Customer Acquisition Cost</em></strong> (LTV) Ratio – Perbandingan antara CLV dan CAC.<br>
</li>
<li><strong><em>Net Promoter Score</em></strong> (NPS) – Ukuran kesetiaan pelanggan berdasarkan rekomendasi.</li>
</ol>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td>Tips Penting dalam Membuat Metrik</td>
</tr>
<tr class="even">
<td>✅ Sederhana: Metrik harus mudah dipahami oleh semua pihak.</td>
</tr>
<tr class="odd">
<td>✅ Relevan: Harus selaras dengan tujuan bisnis.</td>
</tr>
<tr class="even">
<td>✅ Terukur: Harus dapat diukur dengan data yang tersedia.</td>
</tr>
<tr class="odd">
<td>✅ Bisa Ditindaklanjuti: Memberikan wawasan yang bisa diimplementasikan.</td>
</tr>
<tr class="even">
<td>✅ Konsisten: Definisi dan perhitungannya harus seragam di semua tim.</td>
</tr>
</tbody>
</table>
<p>Ini bisa dijadikan contoh metrik apa yang bisa kita buat dan melakukan analisa lebih mendalam sedalam <code>SILET</code>. Okeee see you on the next Story</p>


</section>
</section>

</main> <!-- /main -->
<footer style="text-align: center; margin-top: 20px; font-size: 14px; color: #777;">

  <p>Statistician &amp; Market Research</p>

  <p>Copyright © 2024 Albani :v</p>

</footer>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>